{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"card\"\n};\nconst _hoisted_2 = {\n  class: \"card-body\"\n};\nconst _hoisted_3 = {\n  class: \"blockquote mb-0\"\n};\nconst _hoisted_4 = {\n  class: \"table table-bordered\"\n};\nconst _hoisted_5 = [\"onClick\"];\nconst _hoisted_6 = [\"onClick\"];\nconst _hoisted_7 = {\n  class: \"modal fade\",\n  id: \"updateModal\",\n  tabindex: \"-1\",\n  \"aria-labelledby\": \"updateModalLabel\",\n  \"aria-hidden\": \"true\"\n};\nconst _hoisted_8 = {\n  class: \"modal-dialog\"\n};\nconst _hoisted_9 = {\n  class: \"modal-content\"\n};\nconst _hoisted_10 = {\n  class: \"modal-body\"\n};\nconst _hoisted_11 = {\n  class: \"col-12\"\n};\nconst _hoisted_12 = {\n  class: \"col-12\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[10] || (_cache[10] = _createElementVNode(\"div\", {\n    class: \"card-header rounded-bottom rounded-4\"\n  }, [_createElementVNode(\"h3\", {\n    class: \"py-2\"\n  }, \"Endpoints categorie liste\")], -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"blockquote\", _hoisted_3, [_createElementVNode(\"table\", _hoisted_4, [_cache[5] || (_cache[5] = _createElementVNode(\"thead\", null, [_createElementVNode(\"th\", null, \"Nom\"), _createElementVNode(\"th\", null, \"Description\"), _createElementVNode(\"th\", null, \"Action\")], -1 /* HOISTED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.metaData, item => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: item.id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(item.nom), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(item.details), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createCommentVNode(\" Bouton pour la mise à jour \"), _createElementVNode(\"button\", {\n      class: \"btn m-2\",\n      onClick: $event => $options.openUpdateModal(item)\n    }, [...(_cache[3] || (_cache[3] = [_createElementVNode(\"i\", {\n      class: \"bi bi-pen-fill\"\n    }, null, -1 /* HOISTED */)]))], 8 /* PROPS */, _hoisted_5), _createCommentVNode(\" Bouton pour la suppression \"), _createElementVNode(\"button\", {\n      class: \"btn\",\n      onClick: $event => $options.handleDelete(item.id)\n    }, [...(_cache[4] || (_cache[4] = [_createElementVNode(\"i\", {\n      class: \"bi bi-file-earmark-x-fill\"\n    }, null, -1 /* HOISTED */)]))], 8 /* PROPS */, _hoisted_6)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])])]), _createCommentVNode(\" Modal pour la mise à jour de la description \"), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [_cache[9] || (_cache[9] = _createElementVNode(\"div\", {\n    class: \"modal-header\"\n  }, [_createElementVNode(\"h5\", {\n    class: \"modal-title\",\n    id: \"updateModalLabel\"\n  }, \"Mise à jour de la description\"), _createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn-close\",\n    \"data-bs-dismiss\": \"modal\",\n    \"aria-label\": \"Close\"\n  })], -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.handleUpdate && $options.handleUpdate(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_11, [_cache[6] || (_cache[6] = _createElementVNode(\"label\", {\n    for: \"inputAddress2\",\n    class: \"form-label\"\n  }, \"Categorie :\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _ctx.categorie = $event),\n    id: \"inputAddress2\",\n    placeholder: \"Exemple: User authentification\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.categorie]])]), _createElementVNode(\"div\", _hoisted_12, [_cache[7] || (_cache[7] = _createElementVNode(\"label\", {\n    for: \"inputAddress2\",\n    class: \"form-label\"\n  }, \"Description :\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"textarea\", {\n    type: \"text\",\n    class: \"form-control\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => _ctx.description = $event),\n    id: \"inputAddress2\",\n    placeholder: \"Exemple: FR\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.description]])]), _cache[8] || (_cache[8] = _createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"btn btn-primary\"\n  }, \"Mettre à jour\", -1 /* HOISTED */))], 32 /* NEED_HYDRATION */)])])])])]);\n}","map":{"version":3,"names":["class","id","tabindex","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_Fragment","_renderList","$data","metaData","item","key","_toDisplayString","nom","details","_createCommentVNode","onClick","$event","$options","openUpdateModal","_hoisted_5","handleDelete","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","type","_hoisted_10","onSubmit","_cache","_withModifiers","args","handleUpdate","_hoisted_11","for","_ctx","categorie","placeholder","_hoisted_12","description"],"sources":["/Users/eva_smartelia/Documents/Clean_Code_Mobilo/src/components/endpoints_menu/reponse/Endpoints_categorie_reponse.vue"],"sourcesContent":["<template>\n    <div class=\"card\">\n        <div class=\"card-header rounded-bottom rounded-4\">\n            <h3 class=\"py-2\">Endpoints categorie liste</h3>\n        </div>\n        <div class=\"card-body\">\n            <blockquote class=\"blockquote mb-0\">\n                <table class=\"table table-bordered\">\n                    <thead>\n                        <th>Nom</th>\n                        <th>Description</th>\n                        <th>Action</th>\n                    </thead>\n                    <tbody>\n                        <tr v-for=\"item in metaData\" :key=\"item.id\">\n                            <td>{{ item.nom }}</td>\n                            <td>{{ item.details }}</td>\n                            <td>\n                                <!-- Bouton pour la mise à jour -->\n                                <button class=\"btn m-2\" @click=\"openUpdateModal(item)\"><i class=\"bi bi-pen-fill\"></i></button>\n                                <!-- Bouton pour la suppression -->\n                                <button class=\"btn\" @click=\"handleDelete(item.id)\"><i class=\"bi bi-file-earmark-x-fill\"></i></button>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </blockquote>\n        </div>\n\n        <!-- Modal pour la mise à jour de la description -->\n        <div class=\"modal fade\" id=\"updateModal\" tabindex=\"-1\" aria-labelledby=\"updateModalLabel\" aria-hidden=\"true\">\n            <div class=\"modal-dialog\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <h5 class=\"modal-title\" id=\"updateModalLabel\">Mise à jour de la description</h5>\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                    </div>\n                    <div class=\"modal-body\">\n                        <form @submit.prevent=\"handleUpdate\">\n\n                            <div class=\"col-12\">\n                                <label for=\"inputAddress2\" class=\"form-label\">Categorie :</label>\n                                <input type=\"text\" class=\"form-control\" v-model=\"categorie\" id=\"inputAddress2\" placeholder=\"Exemple: User authentification\"/>\n                            </div>\n                            <div class=\"col-12\">\n                                <label for=\"inputAddress2\" class=\"form-label\">Description :</label>\n                                <textarea type=\"text\" class=\"form-control\" v-model=\"description\" id=\"inputAddress2\" placeholder=\"Exemple: FR\"></textarea>\n                            </div>\n                            <button type=\"submit\" class=\"btn btn-primary\">Mettre à jour</button>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { fetchData, putData, deleteData } from '@/service/apiService';\nimport * as bootstrap from 'bootstrap';\n\nexport default {\n    name: 'Endpoints_categorie_vue',\n    data() {\n        return {\n            metaData: null, // Liste des catégories\n            updatedDescription: '', // Description à mettre à jour\n            selectedItem: null, // Élément sélectionné pour la mise à jour\n            updateModalInstance: null, // Instance du modal\n        };\n    },\n    mounted() {\n        this.fetchSearchInformation();\n    },\n    methods: {\n        async fetchSearchInformation() {\n            try {\n                const response = await fetchData(`/endpoints/allCategorie`);\n                if (response) {\n                    this.metaData = response;\n                }\n            } catch (error) {\n                console.error('Erreur lors de la récupération des données:', error);\n            }\n        },\n        \n        openUpdateModal(item) {\n            this.selectedItem = item;\n            this.updatedDescription = item.details;\n            const modalElement = document.getElementById('updateModal');\n            this.updateModalInstance = new bootstrap.Modal(modalElement);\n            this.updateModalInstance.show();\n        },\n        \n        async handleUpdate() {\n            if (!this.selectedItem) return;\n            try {\n                const data = {\n                    nom: this.categorie,\n                    details: this.description\n                };\n                await putData(`/endpoints/update_categorie/${this.selectedItem.id}`, data);\n                alert('Description mise à jour avec succès !');\n                \n                this.selectedItem.details = this.updatedDescription;\n                this.updateModalInstance.hide();\n            } catch (error) {\n                console.error('Erreur lors de la mise à jour des données:', error);\n            }\n        },\n        \n        async handleDelete(id) {\n            if (confirm('Voulez-vous vraiment supprimer cette information ?')) {\n                try {\n                    await deleteData(`/endpoints/delete_categorie/${id}`);\n                    alert('Données supprimées avec succès !');\n                    \n                    // Supprimer l'élément localement après la suppression\n                    this.metaData = this.metaData.filter(item => item.id !== id);\n                } catch (error) {\n                    console.error('Erreur lors de la suppression des données:', error);\n                }\n            }\n        }\n    }\n};\n</script>\n\n<style scoped>\n.card {\n    border-radius: 15px;\n}\n.card-header {\n    background-color: #022D7E;\n    color: white;\n}\nbutton {\n    background-color: #28aabb;\n    color: white;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}